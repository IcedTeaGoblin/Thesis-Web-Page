<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="styles.css">
</head>

<!--Main body of the webpage-->
<body class="h_main">
    <!--Display for the introductory screen-->
    <div id="introPage" class="h_sub" style="display:flex">
        <!--Display for information regarding the study, and how participants should approach it-->
        <div class="h_intro_info">
            <div style="min-height:95%;width:90%;background-color:rgb(224,224,224);margin-top:20px;border:none;border-radius:10px;">
                <div style="font-size:30px;padding:20px;color:rgb(25,25,25);">How to Participate</div>
                <div style="font-size:20px;padding:20px;color:rgb(25,25,25);">For this study, you will partake in 12 multiple-choice questions that will test your ontology knowledge. Please take your time and read each question carefully!</div>
            </div>
        </div>
        <!--Dispaly for information regarding the ontology models used, and information that could make answering them easier and more intuitive-->
        <div class="h_intro_background">
            <div style="min-height:87%;width:90%;background-color:rgb(224,224,224);margin-top:20px;border:none;border-radius:10px;">
                <div style="font-size:30px;padding:20px;color:rgb(25,25,25);">Background Information</div>
                <div style="font-size:20px;padding:20px;color:rgb(25,25,25);">This will be background information regarding the ontology models that are in the study</div>
            </div>
            <button class="h_begin_button" onclick="changePage()">Continue</button>
        </div>
    </div>

    <!--Display for questions and answers, used for questionaire participation-->
    <div id="questionPage" class="h_sub" style="display:none">
        <script>
            let pageState = 0;
        </script>

        <!--Div for questions and answers-->
        <div class="h_question">
            <!--Div for question and answer-option text-->
            <div class = "h_sub_question">
                <div id="questionText">
                    Question1
                </div>
                <div id="answersText" style="white-space: pre-line">
                    Answers1
                </div>
            </div>

            <!--Container for the answer buttons-->
            <div class="h_answer_box">
                <button id="pageButton" class="ans_button" onclick="changePage(0)">Answer A</button>
                <button id="pageButton" class="ans_button" onclick="changePage(1)">Answer B</button>
                <button id="pageButton" class="ans_button" onclick="changePage(2)">Answer C</button>
                <button id="pageButton" class="ans_button" onclick="changePage(3)">Answer D</button>
            </div>

            <!--Script containing the questions and answers for the question page-->
            <script>
                const questionNum = 12;

                //List of all questions
                const pageQuestions = 
                {
                    1: "Question 1:\n\nThe answer to this is A",
                    2: "Question 2:\n\nThe answer to this is B",
                    3: "Question 3:\n\nThe answer to this is C",
                    4: "Question 4:\n\nThe answer to this is D",
                    5: "Question 5:\n\nThe answer to this is A",
                    6: "Question 6:\n\nThe answer to this is B",
                    7: "Question 7:\n\nThe answer to this is C",
                    8: "Question 8:\n\nThe answer to this is D",
                    9: "Question 9:\n\nThe answer to this is A",
                    10: "Question 10:\n\nThe answer to this is B",
                    11: "Question 11:\n\nThe answer to this is C",
                    12: "Question 12:\n\nThe answer to this is D",
                };

                //List of all answers
                const pageAnswers = 
                {
                    1: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    2: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    3: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    4: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    5: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    6: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    7: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    8: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    9: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    10: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    11: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D",
                    12: "A) Answer A\nB) Answer B\nC) Answer C\nD) Answer D"
                };

                //List of all correct answers (by index)
                const pageSolutions = [0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3];
            </script>
        </div>
        
        <!--Div for visualization, implementing D3 later on-->
        <div class="h_visual"></div>
    </div>

    <!--Display for the final thank you and results page-->
    <div id="outroPage" class="h_sub" style="Display:none">
        <div id="outroText" class="h_outro">
            Final
        </div>
    </div>

    <!--Script containing the logic for tracking, iterating and updating page information-->
    <script>
        //Variable that will keep track of user answers to questions
        let answers = []
        //Variable t hat will keep track of the amount of time a user spends on each page
        let page_time = []
        //Page number variable, used to track the current page state
        let page_num = 0;

        //Establish constant variables for the intro, question and outro pages
        const menuIntro = document.getElementById("introPage");
        const menuQuestion = document.getElementById("questionPage")
        const menuOutro = document.getElementById("outroPage");
        const continueButton = document.getElementById("pageButton");

        //Establish a starting variable for keeping track of time when navigating the page. This should begin as soon as the web page is accessed
        let startTime = new Date().getTime();

        //Function for iterationg through pages
        function changePage(ans=-1)
        {
            //Push the selected answer to the final list of answers
            if (ans != -1)
            {
                answers.push(ans);
            }

            //Iterate the page number with a limit of 13
            page_num = page_num < questionNum ? page_num + 1: (questionNum + 1);

            console.log("page_num: " + page_num);
            //If the page number is over 12, remove the question page and and instead display the outro page
            if (page_num > questionNum)
            {
                final_score = checkAnswers(answers);

                menuQuestion.style.display = "none";
                menuOutro.style.display = "flex";
                continueButton.style.display="none";

                document.getElementById("outroText").textContent = ("Thank you for participating!\n\nFinal score: " + final_score + "/" + questionNum)
                console.log(page_time)
            }
            //If the page number is between 1 and 12, display the appropriate questions page
            else if (page_num > 0)
            {
                menuIntro.style.display = "none";
                menuQuestion.style.display = "flex";

                //Update the text for questions and answers
                document.getElementById("questionText").innerText = pageQuestions[page_num];
                document.getElementById("answersText").innerText = pageAnswers[page_num];
            }

            //Regardless of what happens, update the time variable to keep track of user duration
            const endTime = new Date().getTime();
            const timeSpent = (endTime - startTime) / 1000.0
            //Push the time spent on the page to the final duration tracker, and reset the current time tracker
            page_time.push(timeSpent);
            startTime = endTime;
            
        }

        function checkAnswers(ans_list)
        {
            let correct_ans = 0
            for (i = 0; i < questionNum; i++)
            {
                if (ans_list[i] === pageSolutions[i])
                {
                    correct_ans++;
                }
            }
            return correct_ans;
        }
    </script>
</body>